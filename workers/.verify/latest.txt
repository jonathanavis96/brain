Ralph Verifier Report
Time: 2026-01-23 14:07:49
Git:  9aaa425
AC:   /home/grafe/code/brain/rules/AC.rules
Approvals: /home/grafe/code/brain/rules/MANUAL_APPROVALS.rules
------------------------------------------------------------
[PASS] BugA.1
  desc: Parser uses in_task_section state tracking
  cmd:  grep -c 'in_task_section=false' current_ralph_tasks.sh
  exit: 0
  stdout: 8
[PASS] BugA.2
  desc: Parser checks for ## (major section) not ### subsections
  cmd:  grep -E '^\s*elif.*\^\#\#\[' current_ralph_tasks.sh | grep -v '###' | wc -l | tr -d ' '
  exit: 0
  stdout: 1
[PASS] BugB.1
  desc: Display function uses clear for full redraw
  cmd:  grep -c 'clear' current_ralph_tasks.sh
  exit: 0
  stdout: 5
[PASS] BugB.2
  desc: No differential update logic (LAST_RENDERED)
  cmd:  grep -c 'LAST_RENDERED' current_ralph_tasks.sh
  exit: 1
  stdout: 0
[PASS] BugB.UI.1 (manual approved)
  desc: No visual corruption after terminal resize
  gate: warn
[PASS] BugC.1
  desc: No scan_for_new_completions function
  cmd:  grep -c 'scan_for_new_completions' thunk_ralph_tasks.sh
  exit: 1
  stdout: 0
[PASS] BugC.2
  desc: No PLAN_FILE variable
  cmd:  grep -c '^PLAN_FILE=' thunk_ralph_tasks.sh
  exit: 1
  stdout: 0
[PASS] BugC.3
  desc: No "Scanning IMPLEMENTATION_PLAN" message
  cmd:  grep -c 'Scanning IMPLEMENTATION_PLAN' thunk_ralph_tasks.sh
  exit: 1
  stdout: 0
[PASS] BugC.4
  desc: Monitor references THUNK.md
  cmd:  grep -c 'THUNK\.md' thunk_ralph_tasks.sh
  exit: 0
  stdout: 9
[PASS] BugC.5
  desc: Monitor does not append/redirect into THUNK.md
  cmd:  grep -nE '>>\s*.*THUNK\.md|>\s*.*THUNK\.md' thunk_ralph_tasks.sh | wc -l | tr -d ' '
  exit: 0
  stdout: 0
[PASS] BugC.6
  desc: No task_exists_in_thunk function
  cmd:  grep -c 'task_exists_in_thunk' thunk_ralph_tasks.sh
  exit: 1
  stdout: 0
[PASS] BugC.7
  desc: No extract_task_id function
  cmd:  grep -c 'extract_task_id' thunk_ralph_tasks.sh
  exit: 1
  stdout: 0
[PASS] BugC.UI.1 (manual approved)
  desc: THUNK monitor only displays, never modifies files
  gate: warn
[WARN] Template.1 (auto check failed but warn gate)
  desc: thunk_ralph_tasks.sh matches template
  cmd:  diff -q thunk_ralph_tasks.sh ../../templates/ralph/thunk_ralph_tasks.sh 2>/dev/null && echo "match" || echo "differ"
  exit: 0
  stdout: Files thunk_ralph_tasks.sh and ../../templates/ralph/thunk_ralph_tasks.sh differ
differ
  reasons:
    - stdout mismatch expected='match' got='Files thunk_ralph_tasks.sh and ../../templates/ralph/thunk_ralph_tasks.sh differ
differ'
[PASS] AntiCheat.1
  desc: No fake verification markers in source files
  cmd:  grep -RIn --include='*.sh' --include='*.md' --exclude-dir=.git --exclude-dir=.verify --exclude-dir=logs --exclude-dir=old_md --exclude='AC.rules' --exclude='IMPLEMENTATION_PLAN.md' "<!-- verified" . 2>/dev/null | wc -l | tr -d ' '
  exit: 0
  stdout: 0
[PASS] AntiCheat.2
  desc: No dismissal phrases in active source files
  cmd:  grep -RIn --include='*.sh' --include='*.md' --exclude-dir=.git --exclude-dir=.verify --exclude-dir=logs --exclude-dir=old_md --exclude='AC.rules' --exclude='PROMPT.md' --exclude='IMPLEMENTATION_PLAN.md' "by design" . 2>/dev/null | wc -l | tr -d ' '
  exit: 0
  stdout: 0
[PASS] AntiCheat.3
  desc: No bug reframing in source files
  cmd:  grep -RIn --include='*.sh' --include='*.md' --exclude-dir=.git --exclude-dir=.verify --exclude-dir=logs --exclude-dir=old_md --exclude='AC.rules' --exclude='IMPLEMENTATION_PLAN.md' "feature, not a bug" . 2>/dev/null | wc -l | tr -d ' '
  exit: 0
  stdout: 0
[PASS] AntiCheat.4
  desc: No intended behavior dismissals in source files
  cmd:  grep -RIn --include='*.sh' --include='*.md' --exclude-dir=.git --exclude-dir=.verify --exclude-dir=logs --exclude-dir=old_md --exclude='AC.rules' --exclude='IMPLEMENTATION_PLAN.md' "works as intended" . 2>/dev/null | wc -l | tr -d ' '
  exit: 0
  stdout: 0
[PASS] AntiCheat.5
  desc: No self-certification in source files
  cmd:  grep -RIn --include='*.sh' --include='*.md' --exclude-dir=.git --exclude-dir=.verify --exclude-dir=logs --exclude-dir=old_md --exclude='AC.rules' --exclude='IMPLEMENTATION_PLAN.md' "verified: this is" . 2>/dev/null | wc -l | tr -d ' '
  exit: 0
  stdout: 0
[PASS] Protected.1
  desc: loop.sh unchanged from baseline
  cmd:  sha256sum loop.sh | cut -d' ' -f1 | diff -q - .verify/loop.sha256 >/dev/null 2>&1 && echo "match" || echo "mismatch"
  exit: 0
  stdout: match
[PASS] Protected.2
  desc: verifier.sh unchanged from baseline
  cmd:  sha256sum verifier.sh | cut -d' ' -f1 | diff -q - .verify/verifier.sha256 >/dev/null 2>&1 && echo "match" || echo "mismatch"
  exit: 0
  stdout: match
[PASS] Protected.3
  desc: PROMPT.md unchanged from baseline
  cmd:  sha256sum PROMPT.md | cut -d' ' -f1 | diff -q - .verify/prompt.sha256 >/dev/null 2>&1 && echo "match" || echo "mismatch"
  exit: 0
  stdout: match
[PASS] VerifyMeta.1
  desc: Verifier run_id.txt exists and is non-empty
  cmd:  test -s .verify/run_id.txt && echo "OK" || echo "FAIL"
  exit: 0
  stdout: OK
[PASS] BugB.Auto.1
  desc: Display uses terminal-safe cursor positioning (tput)
  cmd:  grep -c 'tput\|printf.*\\033' current_ralph_tasks.sh
  exit: 0
  stdout: 3
[PASS] BugB.Auto.2
  desc: Display has stty handling for terminal state
  cmd:  grep -c 'stty' current_ralph_tasks.sh
  exit: 0
  stdout: 2
[PASS] BugC.Auto.1
  desc: THUNK monitor has no auto-sync from IMPLEMENTATION_PLAN
  cmd:  grep -c 'IMPLEMENTATION_PLAN\|PLAN_FILE' thunk_ralph_tasks.sh
  exit: 1
  stdout: 0
[PASS] BugC.Auto.2
  desc: THUNK writes limited to era creation only
  cmd:  grep -nE '>>\s*.*THUNK|>\s*.*THUNK' thunk_ralph_tasks.sh | grep -v 'new.*era\|Era:' | wc -l | tr -d ' '
  exit: 0
  stdout: 0
[PASS] Hygiene.Shellcheck.1
  desc: No unused variables in current_ralph_tasks.sh (SC2034)
  cmd:  shellcheck -f gcc current_ralph_tasks.sh 2>/dev/null | grep -c 'SC2034' || true
  exit: 0
  stdout: 0
[PASS] Hygiene.Shellcheck.2
  desc: No SC2155 issues in current_ralph_tasks.sh (local var masking)
  cmd:  shellcheck -f gcc current_ralph_tasks.sh 2>/dev/null | grep -c 'SC2155' || true
  exit: 0
  stdout: 0
[PASS] Hygiene.Shellcheck.3
  desc: No unused variables in thunk_ralph_tasks.sh (SC2034)
  cmd:  shellcheck -f gcc thunk_ralph_tasks.sh 2>/dev/null | grep -c 'SC2034' || true
  exit: 0
  stdout: 0
[PASS] Hygiene.Shellcheck.4
  desc: No SC2155 issues in thunk_ralph_tasks.sh (local var masking)
  cmd:  shellcheck -f gcc thunk_ralph_tasks.sh 2>/dev/null | grep -c 'SC2155' || true
  exit: 0
  stdout: 0
[PASS] Hygiene.TermSync.1
  desc: No stale 'kb/' references in active markdown (migration complete)
  cmd:  rg -l '\bkb/' --include='*.md' --glob='!HISTORY.md' --glob='!CHANGES.md' --glob='!old_md/*' . 2>/dev/null | wc -l | tr -d ' '
  exit: 0
  stdout: 0
[PASS] Hygiene.TermSync.2
  desc: No "Brain KB" terminology (should be "Brain Skills")
  cmd:  rg -c 'Brain KB' --include='*.md' --glob='!HISTORY.md' --glob='!CHANGES.md' . 2>/dev/null | wc -l | tr -d ' '
  exit: 0
  stdout: 0
[PASS] Hygiene.TermSync.3
  desc: No "KB file" terminology (should be "skill file")
  cmd:  rg -c 'KB file' --include='*.md' --glob='!HISTORY.md' --glob='!CHANGES.md' . 2>/dev/null | wc -l | tr -d ' '
  exit: 0
  stdout: 0
[WARN] Hygiene.TemplateSync.1 (auto check failed but warn gate)
  desc: current_ralph_tasks.sh matches template
  cmd:  diff -q current_ralph_tasks.sh ../../templates/ralph/current_ralph_tasks.sh 2>/dev/null && echo "match" || echo "differ"
  exit: 0
  stdout: Files current_ralph_tasks.sh and ../../templates/ralph/current_ralph_tasks.sh differ
differ
  reasons:
    - stdout mismatch expected='match' got='Files current_ralph_tasks.sh and ../../templates/ralph/current_ralph_tasks.sh differ
differ'
[WARN] Hygiene.TemplateSync.2 (auto check failed but warn gate)
  desc: loop.sh core logic matches template (excluding hashes)
  cmd:  diff <(grep -v 'sha256\|MODEL_' loop.sh) <(grep -v 'sha256\|MODEL_' ../../templates/ralph/loop.sh) 2>/dev/null && echo "match" || echo "differ"
  exit: 0
  stdout: 9c9
< #   Ralph operates from: $ROOT/workers/ralph/ (derived from this script location)
---
> #   Ralph operates from: $ROOT/ralph/ (derived from this script location)
18c18
<   RALPH="$ROOT/workers/ralph"
---
>   RALPH="$ROOT/ralph"
20c20
<   # Get absolute path to this script, then go up two levels for ROOT (brain/workers/ralph -> brain)
---
>   # Get absolute path to this script, then go up one level for ROOT
21a22
>   ROOT="$(dirname "$SCRIPT_DIR")"
23d23
<   ROOT="$(dirname "$(dirname "$SCRIPT_DIR")")"
922c922
<       --max-turns 15 \
---
>       --max-turns 30 \
1300c1300
<         if (cd "$RALPH" && bash sync_cortex_plan.sh) 2>&1; then
---
>         if bash "$RALPH/sync_cortex_plan.sh" 2>&1; then
differ
  reasons:
    - stdout mismatch expected='match' got='9c9
< #   Ralph operates from: $ROOT/workers/ralph/ (derived from this script location)
---
> #   Ralph operates from: $ROOT/ralph/ (derived from this script location)
18c18
<   RALPH="$ROOT/workers/ralph"
---
>   RALPH="$ROOT/ralph"
20c20
<   # Get absolute path to this script, then go up two levels for ROOT (brain/workers/ralph -> brain)
---
>   # Get absolute path to this script, then go up one level for ROOT
21a22
>   ROOT="$(dirname "$SCRIPT_DIR")"
23d23
<   ROOT="$(dirname "$(dirname "$SCRIPT_DIR")")"
922c922
<       --max-turns 15 \
---
>       --max-turns 30 \
1300c1300
<         if (cd "$RALPH" && bash sync_cortex_plan.sh) 2>&1; then
---
>         if bash "$RALPH/sync_cortex_plan.sh" 2>&1; then
differ'
[PASS] Hygiene.Markdown.1
  desc: No duplicate H2 headings in IMPLEMENTATION_PLAN.md
  cmd:  grep -E '^## ' IMPLEMENTATION_PLAN.md | sort | uniq -d | wc -l | tr -d ' '
  exit: 0
  stdout: 0
[PASS] Lint.Markdownlint.AGENTS
  desc: AGENTS.md passes markdownlint (if installed)
  cmd:  bash -c 'command -v markdownlint &>/dev/null && markdownlint AGENTS.md 2>&1 | head -10 || echo "ok (markdownlint not installed)"'
  exit: 0
  stdout: AGENTS.md:3 error MD022/blanks-around-headings Headings should be surrounded by blank lines [Expected: 1; Actual: 0; Below] [Context: "## First Step: Read the Brain Map"]
AGENTS.md:4:81 error MD013/line-length Line length [Expected: 80; Actual: 91]
AGENTS.md:6 error MD022/blanks-around-headings Headings should be surrounded by blank lines [Expected: 1; Actual: 0; Below] [Context: "## Purpose"]
AGENTS.md:7:81 error MD013/line-length Line length [Expected: 80; Actual: 114]
AGENTS.md:9 error MD022/blanks-around-headings Headings should be surrounded by blank lines [Expected: 1; Actual: 0; Below] [Context: "## Prerequisites"]
AGENTS.md:10 error MD032/blanks-around-lists Lists should be surrounded by blank lines [Context: "- **Environment:** WSL (Window..."]
AGENTS.md:12:31 error MD034/no-bare-urls Bare URL used [Context: "https://developer.atlassian.co..."]
AGENTS.md:18:81 error MD013/line-length Line length [Expected: 80; Actual: 88]
AGENTS.md:18 error MD032/blanks-around-lists Lists should be surrounded by blank lines [Context: "- Working directory: `/mnt/c/...."]
AGENTS.md:23 error MD022/blanks-around-headings Headings should be surrounded by blank lines [Expected: 1; Actual: 0; Below] [Context: "## How to Run"]
[PASS] Lint.Markdownlint.NEURONS
  desc: NEURONS.md passes markdownlint (if installed)
  cmd:  bash -c 'command -v markdownlint &>/dev/null && markdownlint NEURONS.md 2>&1 | head -10 || echo "ok (markdownlint not installed)"'
  exit: 0
  stdout: NEURONS.md:3:81 error MD013/line-length Line length [Expected: 80; Actual: 88]
NEURONS.md:5 error MD022/blanks-around-headings Headings should be surrounded by blank lines [Expected: 1; Actual: 0; Below] [Context: "## Purpose"]
NEURONS.md:6:81 error MD013/line-length Line length [Expected: 80; Actual: 204]
NEURONS.md:8 error MD022/blanks-around-headings Headings should be surrounded by blank lines [Expected: 1; Actual: 0; Below] [Context: "## Navigation Rules (Read This First)"]
NEURONS.md:10 error MD032/blanks-around-lists Lists should be surrounded by blank lines [Context: "1. `AGENTS.md` (injected first..."]
NEURONS.md:17:81 error MD013/line-length Line length [Expected: 80; Actual: 100]
NEURONS.md:93:12 error MD060/table-column-style Table column style [Table pipe is missing space to the left for style "compact"]
NEURONS.md:93:22 error MD060/table-column-style Table column style [Table pipe is missing space to the left for style "compact"]
NEURONS.md:93:32 error MD060/table-column-style Table column style [Table pipe is missing space to the left for style "compact"]
NEURONS.md:93:1 error MD060/table-column-style Table column style [Table pipe is missing space to the right for style "compact"]
[PASS] Lint.Markdownlint.THOUGHTS
  desc: THOUGHTS.md passes markdownlint (if installed)
  cmd:  bash -c 'command -v markdownlint &>/dev/null && markdownlint THOUGHTS.md 2>&1 | head -10 || echo "ok (markdownlint not installed)"'
  exit: 0
  stdout: THOUGHTS.md:10:13 error MD060/table-column-style Table column style [Table pipe is missing space to the left for style "compact"]
THOUGHTS.md:10:24 error MD060/table-column-style Table column style [Table pipe is missing space to the left for style "compact"]
THOUGHTS.md:10:34 error MD060/table-column-style Table column style [Table pipe is missing space to the left for style "compact"]
THOUGHTS.md:10:1 error MD060/table-column-style Table column style [Table pipe is missing space to the right for style "compact"]
THOUGHTS.md:10:13 error MD060/table-column-style Table column style [Table pipe is missing space to the right for style "compact"]
THOUGHTS.md:10:24 error MD060/table-column-style Table column style [Table pipe is missing space to the right for style "compact"]
THOUGHTS.md:11:81 error MD013/line-length Line length [Expected: 80; Actual: 91]
THOUGHTS.md:12:81 error MD013/line-length Line length [Expected: 80; Actual: 93]
THOUGHTS.md:13:81 error MD013/line-length Line length [Expected: 80; Actual: 81]
THOUGHTS.md:14:81 error MD013/line-length Line length [Expected: 80; Actual: 81]
[PASS] Hygiene.DocSync.1
  desc: AGENTS.md THUNK monitor docs don't reference removed 'f' hotkey
  cmd:  grep -A5 'THUNK Monitor' AGENTS.md | grep -c 'force sync\|f.*sync' 2>/dev/null || true
  exit: 0
  stdout: 0
[PASS] Hygiene.DocSync.2
  desc: AGENTS.md THUNK monitor docs don't claim auto-sync
  cmd:  grep -A10 'THUNK Monitor' AGENTS.md | grep -c 'Auto-sync\|auto-sync' 2>/dev/null || true
  exit: 0
  stdout: 0
[PASS] Hygiene.StatusSync.1
  desc: IMPLEMENTATION_PLAN.md has no conflicting branch status claims
  cmd:  bash -c 'up=$(grep -c "up to date" IMPLEMENTATION_PLAN.md 2>/dev/null || echo 0); ahead=$(grep -c "commits ahead" IMPLEMENTATION_PLAN.md 2>/dev/null || echo 0); if [[ $up -gt 0 && $ahead -gt 0 ]]; then echo "conflict"; else echo "ok"; fi'
  exit: 0
  stdout: ok
  stderr: bash: line 1: [[: 0
0: syntax error in expression (error token is "0")
[PASS] Hygiene.Structure.1
  desc: NEURONS.md skills/ file count is accurate (currently 23+ files)
  cmd:  bash -c 'actual=$(find skills/ -type f -name "*.md" 2>/dev/null | wc -l); claimed=$(grep -oE "skills/[^)]*\([0-9]+ files\)" NEURONS.md 2>/dev/null | grep -oE "[0-9]+" | head -1 || echo 0); if [[ $claimed -lt 20 && $actual -gt 20 ]]; then echo "outdated"; else echo "ok"; fi'
  exit: 0
  stdout: ok
[PASS] Waiver.CountLimit
  desc: No more than 10 active waivers (keep exceptions exceptional)
  cmd:  bash -c 'source ../.verify/check_waiver.sh 2>/dev/null && count=$(count_active_waivers); if [[ $count -le 10 ]]; then echo "ok ($count active)"; else echo "FAIL: $count active waivers (max 10)"; fi'
  exit: 0
  stdout: ok ( active)
[PASS] Waiver.NoBlanketScope
  desc: No waivers with wildcard or repo-wide scope
  cmd:  bash -c 'found=0; shopt -s nullglob; for f in ../.verify/waivers/*.approved; do [[ -f "$f" ]] || continue; if grep -qE "PATHS=(\.|(\*)+|.*\*.*)" "$f"; then found=1; echo "FAIL: $(basename "$f") has wildcard scope"; fi; done; [[ $found -eq 0 ]] && echo "ok"'
  exit: 0
  stdout: ok
[PASS] Waiver.ExpiryRequired
  desc: All approved waivers have valid EXPIRES field
  cmd:  bash -c 'shopt -s nullglob; for f in ../.verify/waivers/*.approved; do [[ -f "$f" ]] || continue; exp=$(grep "^EXPIRES=" "$f" | cut -d= -f2); if [[ -z "$exp" ]]; then echo "FAIL: $(basename "$f") missing EXPIRES"; exit 1; fi; done; echo "ok"'
  exit: 0
  stdout: ok
[PASS] Waiver.HashIntegrity
  desc: Approved waivers match their request hashes (no tampering)
  cmd:  bash -c 'shopt -s nullglob; for f in ../.verify/waivers/*.approved; do [[ -f "$f" ]] || continue; wid=$(grep "^WAIVER_ID=" "$f" | cut -d= -f2); req="../.verify/waiver_requests/${wid}.json"; stored=$(grep "^REQUEST_SHA256=" "$f" | cut -d= -f2); if [[ -f "$req" ]]; then actual=$(sha256sum "$req" | cut -d" " -f1); if [[ "$stored" != "$actual" ]]; then echo "FAIL: ${wid} hash mismatch (request modified after approval)"; exit 1; fi; fi; done; echo "ok"'
  exit: 0
  stdout: ok
[PASS] Waiver.NoUnapprovedInUse
  desc: No waiver requests referenced without corresponding approval
  cmd:  bash -c 'shopt -s nullglob; for req in ../.verify/waiver_requests/*.json; do [[ -f "$req" ]] || continue; wid=$(basename "$req" .json); if [[ ! -f "../.verify/waivers/${wid}.approved" ]]; then echo "PENDING: $wid (not yet approved)"; fi; done; echo "ok"'
  exit: 0
  stdout: ok
[PASS] Cortex.FileSizeLimit.THOUGHTS
  desc: cortex/THOUGHTS.md max 100 lines (archive old content)
  cmd:  bash -c 'lines=$(wc -l < ../../cortex/THOUGHTS.md 2>/dev/null || echo 0); [[ $lines -le 100 ]] && echo "ok ($lines lines)" || echo "OVER: $lines lines (max 100)"'
  exit: 0
  stdout: ok (39 lines)
[PASS] Cortex.FileSizeLimit.SYSTEM_PROMPT
  desc: cortex/CORTEX_SYSTEM_PROMPT.md max 150 lines
  cmd:  bash -c 'lines=$(wc -l < ../../cortex/CORTEX_SYSTEM_PROMPT.md 2>/dev/null || echo 0); [[ $lines -le 150 ]] && echo "ok ($lines lines)" || echo "OVER: $lines lines (max 150)"'
  exit: 0
  stdout: ok (108 lines)
[PASS] Cortex.FileSizeLimit.AGENTS
  desc: cortex/AGENTS.md max 180 lines
  cmd:  bash -c 'lines=$(wc -l < ../../cortex/AGENTS.md 2>/dev/null || echo 0); [[ $lines -le 180 ]] && echo "ok ($lines lines)" || echo "OVER: $lines lines (max 180)"'
  exit: 0
  stdout: ok (170 lines)
[WARN] Lint.Shellcheck.LoopSh (auto check failed but warn gate)
  desc: loop.sh passes shellcheck (if installed)
  cmd:  bash -c 'command -v shellcheck &>/dev/null && shellcheck -e SC1091 loop.sh 2>&1 | head -20 || echo "ok (shellcheck not installed)"'
  exit: 0
  stdout:
  reasons:
    - stdout regex mismatch expected=/(^$|ok|^In loop\.sh)/ got=''
[WARN] Lint.Shellcheck.VerifierSh (auto check failed but warn gate)
  desc: verifier.sh passes shellcheck (if installed)
  cmd:  bash -c 'command -v shellcheck &>/dev/null && shellcheck -e SC1091 verifier.sh 2>&1 | head -20 || echo "ok (shellcheck not installed)"'
  exit: 0
  stdout:
  reasons:
    - stdout regex mismatch expected=/(^$|ok|^In verifier\.sh)/ got=''
[WARN] Lint.Shellcheck.CurrentRalphTasks (auto check failed but warn gate)
  desc: current_ralph_tasks.sh passes shellcheck (if installed)
  cmd:  bash -c 'command -v shellcheck &>/dev/null && shellcheck -e SC1091 current_ralph_tasks.sh 2>&1 | head -20 || echo "ok (shellcheck not installed)"'
  exit: 0
  stdout:
  reasons:
    - stdout regex mismatch expected=/(^$|ok|^In current_ralph)/ got=''
[WARN] Lint.Shellcheck.ThunkRalphTasks (auto check failed but warn gate)
  desc: thunk_ralph_tasks.sh passes shellcheck (if installed)
  cmd:  bash -c 'command -v shellcheck &>/dev/null && shellcheck -e SC1091 thunk_ralph_tasks.sh 2>&1 | head -20 || echo "ok (shellcheck not installed)"'
  exit: 0
  stdout:
  reasons:
    - stdout regex mismatch expected=/(^$|ok|^In thunk_ralph)/ got=''
[PASS] Lint.Markdown.NeuronsBalancedFences
  desc: NEURONS.md has balanced code fences (equal opens/closes)
  cmd:  bash -c 'opens=$(grep -c "^\`\`\`[a-z]" NEURONS.md 2>/dev/null || echo 0); closes=$(grep -c "^\`\`\`$" NEURONS.md 2>/dev/null || echo 0); [[ "$opens" -eq "$closes" ]] && echo "ok ($opens pairs)" || echo "UNBALANCED: $opens opens, $closes closes"'
  exit: 0
  stdout: ok (10 pairs)
[PASS] Lint.Markdown.AgentsBalancedFences
  desc: AGENTS.md has balanced code fences (equal opens/closes)
  cmd:  bash -c 'opens=$(grep -c "^\`\`\`[a-z]" AGENTS.md 2>/dev/null || echo 0); closes=$(grep -c "^\`\`\`$" AGENTS.md 2>/dev/null || echo 0); [[ "$opens" -eq "$closes" ]] && echo "ok ($opens pairs)" || echo "UNBALANCED: $opens opens, $closes closes"'
  exit: 0
  stdout: ok (2 pairs)
[PASS] Lint.Markdown.ThoughtsBalancedFences
  desc: THOUGHTS.md has balanced code fences (equal opens/closes)
  cmd:  bash -c 'opens=$(grep -c "^\`\`\`[a-z]" THOUGHTS.md 2>/dev/null || echo 0); closes=$(grep -c "^\`\`\`$" THOUGHTS.md 2>/dev/null || echo 0); [[ "$opens" -eq "$closes" ]] && echo "ok ($opens pairs)" || echo "UNBALANCED: $opens opens, $closes closes"'
  exit: 0
  stdout: ok (2 pairs)
[PASS] Lint.PreCommit.ConfigExists
  desc: Pre-commit config exists at repo root
  cmd:  bash -c '[[ -f "../../.pre-commit-config.yaml" ]] && echo "ok" || echo "MISSING: .pre-commit-config.yaml"'
  exit: 0
  stdout: ok
------------------------------------------------------------
SUMMARY
  PASS: 53
  FAIL: 0
  WARN: 7 (manual_warn=0)
  SKIP: 0
  Manual gate=block failures: 0
  Hash guard: OK
